<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title> new document </title>
    <link rel="stylesheet" href="../css/bootstrap.css"/>
    <style type="text/css">

    </style>
</head>
<body>
<div class="container">
    <div id="search_container"></div>

    <script type="text/template" id="search_template">
        <label><%= search_label %></label>
        <input type="text" id="search_input" />
        <input type="button" id="search_button" value="Search" />
    </script>
</div>
<script type="text/javascript" src="../lib/jquery.js"></script>
<script type="text/javascript" src="../lib/underscore.js"></script>
<script type="text/javascript" src="../lib/backbone.js"></script>
<script>
    (function ($) {
        /*var Man = Backbone.Model.extend({
            initialize: function(){
                alert('Hey, you create me!');
                this.bind('change:name', function() {
                    var name =  this.get('name');
                    alert('你改变了name属性为：' + name);
                });
                this.bind("invalid",function(model,error){
                    alert(error);
                });
            },
            defaults: {
                name: '张三',
                'age': '38'
            },
            validate: function(attributes){
                if(attributes.name == '') {
                    return "name不能为空！";
                }
            },
            aboutMe: function(){
                return '我叫' + this.get('name') + ',今年' + this.get('age') + '岁';
            }
        });
        var man = new Man;
        man.set({name: ''});
        man.save();*/

        var SearchView = Backbone.View.extend({
            el: '#search_container',
            initialize: function () {
                this.render({search_label: '搜索按钮'})
            },
            render: function (context) {
                //使用underscore这个库，来编译模板
                var template = _.template($("#search_template").html());
                //加载模板到对应的el属性中
                $(this.el).html(template(context));
            },
            events:{  //就是在这里绑定的
                //定义类型为button的input标签的点击事件，触发函数doSearch
                'click input[type=button]' : 'doSearch'

            },

            doSearch: function(event){
                alert("search for " + $("#search_input").val());
            }
        });
        var searchView = new SearchView();
    })(jQuery);

</script>
</body>
</html>
